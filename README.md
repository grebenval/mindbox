## Задание №1

### Описание
Проект разработан на .net 5.
Приложение состоит из трех модулей. Разделение на модули позволяет довольно легко изменить используемую БД, или использовать/поддерживать несколько БД,
добавить к примеру поддержку GRPC. 
***Модули (проекты)***:
1. **MindboxApi** - реализация Web Api
2. **Mindbox.Bl** - общие модули, не зависимые от БД (бизнес логика)
3. **Mindbox.Database.Sqlite** - модуль доступа к БД / специализированный модуль доступа к БД

Реализована поддержка **swagger**, перейдите по адресу /swagger/index.html

В качестве базы данных выбрана ***Sqlite***. 
***ORM - Entity Framework Core*** - как (IMHO) наиболее популярный, реализованный и поддержанный ***Microsoft***, 
что обеспечивает простоту сопровождения и развития. Можно использовать *сode first*, или классический подход (*database first*).
Базу данных можно изменить двумя способами:
1. Оставить **Entity Framework Core**, изменив БД в нём
2. Если требуется другая *ORM / доступ через ADO.NET* - необходим модуль содержащий класс реализующий интерфейс **IFigureManipulation**, и 
для инициализии принимающий **IDatabaseConnect** *(возвращает строку инициализации)* на вход.

Описание входного контракта
1. ***figureType*** - тип фигуры (1 - *круг*, 2 - *треугольник*), тип данных** int**
2. ***figureInputData*** - массив входных параметров, типа данных** double**, 1 - параметр для круга, 2 - параметра для треугольника.

Примеры запросов JSON, на вставку фигуры:
1. Вставка круга 
>{
  "figureType": 1,
  "figureInputData": [
    23.45
  ]
}

2. Вставка треугольник 
>{
  "figureType": 1,
  "figureInputData": [
    3,4,5
  ]
}

Примеры не корректных запросов JSON, на вставку фигуры:

1. Не известный тип фигуры
>{
  "figureType": -10,
  "figureInputData": [
    23.45
  ]
}

2. Не допустимый радиус круга
>{
  "figureType": 1,
  "figureInputData": [
    -23.45
  ]
}

3. Не число - радиус круга
>{
  "figureType": 1,
  "figureInputData": [
    "NaN"
  ]
}

4. Бесконечность - радиус круга
>{
  "figureType": 1,
  "figureInputData": [
    "Infinity"
  ]
}

5. Не треугольник 
>{
  "figureType": 1,
  "figureInputData": [
    1,1,5
  ]
}

6. Отрицательная длина стороны треульника
>{
  "figureType": 1,
  "figureInputData": [
    1,-7,5
  ]
}

7. Входная фигура треугольник, сумма двух меньших сторон больше double.MaxValue = 1,7976931348623157E+308. Не возможно рассчитать площадь (слишком большое значение при расчете получается для double)
>{
  "figureType": 2,
  "figureInputData": [
    1.79769313486231E308, 1.7E308, 1.7E308
  ]
}

### Описание схемы БД
Скрип на создание в файле ***SqliteCreateDatabase.sql*** файл базы данных ***mindbox.sqlite***, проекта **Mindbox.Database.Sqlite**
Площадь решено хранить в БД, рассчет при вставке фигуры (бесопасней, проще не нужно в БД считать или запрашивать данные фигуры для расчета из БД, и один раз считаем)
Кроме того, сразу отсекаем не корректные значения (возможно при расчете будут ошибки, таки фигуры блокируем на входе как не корректные).
Идею хранить данные фигуры в JSON или в таблице со связью 1 - к бесконечности, отбросил из-за усложнения использования в БД в запросах 
(хотя это возможно для реализации), и тогда не придется делать поддержку каждого типа фигуры в БД
В БД три таблицы:
1. ***figures*** - таблица для хранения фигур (идентификатор, тип фигуры, площадь)
2. ***circles*** - связана 1 к 1 с *figures*, содержит радиус и ключ для связи
3. ***triangle*** - связана 1 к 1 с *figures*, содержит стороны треугольника a,b,c и ключ для связи

### ***Unit-тесты***
Используется XUnit - *покрытие кода*:
1. **MindboxApi** - 44.44%, покрыт контроллер (при сильном желании можно 100%, но трата времени? Целесообразность?)
2. **Mindbox.Bl** - 100%.
3. **Mindbox.Database.Sqlite** - 94.12%, покрыты классы для манипуляции данных (всё, что генерируется не покрыто, можно и это покрыть, но трата времени? Целесообразность?)

### Готовность сервисов к расширению (насколько сложно добавить поддержку нового типа фигур?)

#### Расширение - добавление нового сервиса
1. Изменения **Mindbox.Bl**
* ***Расширить*** интерфейс к **IFigureManipulation** или ***создать дополнительный*** для взаимодействия с БД
* Реализовать модели для входных данных с валидацией
2. Изменения **Mindbox.Bl** - добавить новые объекты БД и поддержать их в данном модуле. Или создать новый модуль доступа к данным реализующий тремуемый интерфейс доступа
созданный раннее (см. выше). Это можно сделать используя классический подход (database first) или code first.
3. Изменения **MindboxApi** - добавить методы существующего контроллера, или добавить новый контроллер.
4. Покрыть код Unit-тестами, с учётом измений.

#### Расширение - поддержка нового типа фигуры

1. Изменения БД (и модуля **Mindbox.Database.Sqlite**)
* Для расширения, необходимо добавить в БД таблицу со связью 1 к 1 к таблице ***figures***, и реализовать поля таблицы для хранения данных фигуры
Это можно сделать используя классический подход (database first) или code first
* В классе **FigureExtension**, метод **AddSpecFigure**, добавить поддержку типа фигуры для сохранения, по аналогии для других фигур.

2. Изменения **Mindbox.Bl**
* Создать класс для фигуры, наследуемый от интерфейса **IFigureInput**, и реализовать статический метод для валидации **Validate**
(см.  пример класс **FigureTriangle**)
* Класс **FigureCreate** - добавить новый тип фигуры, в **FigureType**, добавить создание фигуры по типу в 
метод **Create()**, расширить массив **_validatorsFigures** на метод валидации в созданном классе фигуры, и реализовать вызов валидации в
методе **Validate**
3. Изменения **MindboxApi** - не требуются.
4. Покрыть код Unit-тестами, с учётом измений.

